# Установка и настройка

> Совет: многие руководства на [docs.microsoft.com](https://docs.microsoft.com/) автоматически переведены на русский язык. Чтобы посмотреть англоязычную версию, можно:
>
> * В URL страницы заменить `ru-ru` на `en-us`
> * Нажать **Прочитать на английском**  

## Шаг 1 - Windows 10 (или 11)

Если у вас Windows 11 то всё хорошо. Если Windows 10, которая устанавливалась давно и всё это время не обновлялась, то можно обновить её, либо же установить более современную версию отдельно. В последнем случае стоит определиться, куда ставить ОС: на отдельный диск или рядом с другой системой на одном диске - нет универсальной рекомендации, всё зависит от желания и удобства. Важно только чтобы уже установленная или планируемая к установке Windows 10 удовлетворяла требованиям:

> WSL 2:
>
> 1. [в идеале](https://docs.microsoft.com/windows/wsl/install)
>    * Windows 10 version 2004 and higher (Build 19041 and higher) or Windows 11
>
> 1. [либо же](https://docs.microsoft.com/windows/wsl/install-manual)
>    * For x64 systems: Windows 10, Version 1903 or higher, with Build 18362 or higher.
>    * For ARM64 systems: Windows 10, Version 2004 or higher, with Build 19041 or higher

<!-- Имея достаточно свежий билд Windows 10 можно воспользоваться командой для PowerShell: 
```bash
wsl --install
```
она проделает описанные выше действия автоматически, а также сразу установит дистрибутив Linux (скорее всего Ubuntu). При желании его можно будет заменить на другой, но в действительности в этом нет необходимости.     Связанный с этой командой гайд [тут](https://docs.microsoft.com/windows/wsl/install)

 > Совет: перезагрузите компьютер после выполнения двух команд из инструкции выше, чтобы `.msi`-пакет установился без проблем. Иначе вы можете воспользоваться [этой](https://github.com/microsoft/WSL/issues/5014#issuecomment-605243281) инструкцией, чтобы распаковать `.msi` и скопировать его содержимое в указанную папку. И вообще, если на этих этапах возникают проблемы, первым делом попробуйте перезагрузить компьютер. -->

### Загрузочная флешка Windows 10

[Достаточно подробное руководство по созданию загрузочной флешки при помощи Rufus](https://remontka.pro/rufus-3-bootable-usb/).
> Совет: чтобы иметь возможность скачивать официальные образы с сайта Microsoft автоматически, повторите действия из [видео](https://www.youtube.com/watch?v=vmIFNUuLsKA).

Приобрести Windows [можно тут](https://www.microsoft.com/ru-ru/windowsforbusiness/how-to-buy), активировать при помощи [этого](https://support.microsoft.com/ru-ru/windows/%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%B0%D1%86%D0%B8%D1%8F-windows-c39005d4-95ee-b91e-b399-2820fda32227) руководства. Пиратством, разумеется, не занимаемся.

### Установка

Дальнейшие шаги зависят от особенностей вашего компьютера. Если говорить в общих чертах, то необходимо загрузиться с флешки и следовать инструкциям установщика.
> Совет: у вас будет гораздо меньше проблем с этим этапом, если устанавливать на чистый диск. Или хотя бы на заранее размеченный сторонними программами чистый раздел диска. Сам я устанавливал на специально приобретенный для этих целей SSD на 256 ГБ, поскольку в прошлом успел намучатся с содержанием различных версий винды/линух-дистрибутивов на одном диске.

## Шаг 2 - VSCode

Скачивается с [официального сайта](https://code.visualstudio.com/) и устанавливается как любая программа. В процессе предложит выбор: установить для пользователя или глобально, я предпочитаю "для пользователя".

Всё что и как вы настроите в редакторе, от цветовых тем и шрифтов, до горячих клавиш, будет впоследствии аккуратно лежать в файле settings.json. Чтобы эти настройки сохранялись в облаке и автоматически передавались на другие ваши устройства с VSCode рекомендую залогиниться через GitHub аккаунт - сам так делаю, очень удобно.

Свои настройки, возможно, выложу вместе с гайдом по расширениям, которыми пользуюсь. Сроки в которые это произойдет зависят только от развития моей старческой деменции.

## Шаг 3 - WSL

Интернет полон гайдов, как официальных текстовых на сайте Microsoft (ссылки на них есть [тут](my-stack.md)), так и неофициальных, но очень качественных видео-гайдов на английском, там всё очень просто, видос на 3 минуты - посмотрел и поставил.

Однако я размещу ссылки на крайне полезные гайды по работе с WSL, которые мне очень помогают:

1. [WSLg](https://github.com/microsoft/wslg) позволяет по щелчку пальцев запускать графические приложения
2. [Как перезагрузить WSL](https://www.how2shout.com/how-to/how-to-reboot-wsl-windows-subsystem-linux-in-windows-10.html) сам я пользуюсь только командой `wsl --shutdown`
3. [Как обновить дистрибутив](https://www.how2shout.com/linux/how-to-upgrade-wsl-2-or-1-ubuntu-20-04-to-22-04-lts/) единственный минус - в Windows все равно подписано как 20.04, попытка отредактировать имя привела к тому что всё перестало работать в принципе
4. [Как уменьшить размер дистрибутива](https://stephenreescarter.net/how-to-shrink-a-wsl2-virtual-disk/) очень полезная процедура, из-за особенностей работы файл с дистрибутивом может раздуваться до неимоверных масштабов, удаление программ в самом дистрибутиве к успеху не приведёт, а этот гайд поможет сэкономить много места.
5. [Несколько](https://docs.microsoft.com/ru-ru/windows/wsl/wsl2-mount-disk) [сохраненных](https://superuser.com/questions/134734/how-to-mount-a-drive-from-terminal-in-ubuntu) [ссылок](https://askubuntu.com/questions/859787/how-to-unmount-and-mount-pen-drive-in-ubuntu-via-command-line), которые как-то мне помогли в свое время, но я не помню как. Возможно, если проделать вещи из них, то виртуальный диск дистрибутива будет отображаться в проводнике Windows и можно будет перекидывать туда-сюда файлы как обычно, но вроде эта фича доступна по-умолчанию. А может это для того чтобы из WSL получать доступ к диску винды?...
